@model ChangesDetector.model.PageChanges

<div id="diffBox">
    <div id="col-lg-6" style="font-size:9px;">
        @foreach (var page in Model.Changes)
        {
            <div class="row">
                <div class="col-lg-12">
                    @foreach (var line in page.Lines)
                    {
                        @if (!string.IsNullOrEmpty(line.Text))
                        {
                            string spaceValue = "\u00B7";
                            string tabValue = "\u00B7\u00B7";
                            if (line.Type == DiffPlex.DiffBuilder.Model.ChangeType.Deleted || line.Type == DiffPlex.DiffBuilder.Model.ChangeType.Inserted || line.Type == DiffPlex.DiffBuilder.Model.ChangeType.Unchanged)
                            {
                                if (line.Type == DiffPlex.DiffBuilder.Model.ChangeType.Deleted)
                                {
                                    <span style="float:left; width:100%; background-color:#ff0000">@Html.Raw(Html.Encode(line.Text).Replace(" ", spaceValue).Replace("\t", tabValue))</span>

                                }
                                else
                                {
                                    <span style="float:left; width:100%; background-color:#808080">@Html.Raw(Html.Encode(line.Text).Replace(" ", spaceValue).Replace("\t", tabValue))</span>

                                }

                            }
                            else if (line.Type == DiffPlex.DiffBuilder.Model.ChangeType.Modified)
                            {
                                foreach (var character in line.SubPieces)
                                {
                                    if (character.Type == DiffPlex.DiffBuilder.Model.ChangeType.Imaginary) { continue; }

                                    <span class="@character.Type.ToString()Character piece">@character.Text.Replace(" ", spaceValue.ToString())</span>
                                }
                            }

                        }
                    }
                </div>
            </div>
        }
    </div>

    <div class="clear">
    </div>
</div>